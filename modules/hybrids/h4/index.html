<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MAD9022 Hybrids Phase 4 | MAD9022</title>
    <meta name="generator" content="VuePress 1.9.8">
    
    <meta name="description" content="Fullstack: Frontend Development Course">
    
    <link rel="preload" href="/w2023/assets/css/0.styles.33e990fb.css" as="style"><link rel="preload" href="/w2023/assets/js/app.49733bfc.js" as="script"><link rel="preload" href="/w2023/assets/js/2.e00fc094.js" as="script"><link rel="preload" href="/w2023/assets/js/23.9a4c47c6.js" as="script"><link rel="preload" href="/w2023/assets/js/9.b21c66c5.js" as="script"><link rel="preload" href="/w2023/assets/js/11.92cefe25.js" as="script"><link rel="prefetch" href="/w2023/assets/js/10.41910312.js"><link rel="prefetch" href="/w2023/assets/js/12.b4bafa0d.js"><link rel="prefetch" href="/w2023/assets/js/13.ba803485.js"><link rel="prefetch" href="/w2023/assets/js/14.1e383464.js"><link rel="prefetch" href="/w2023/assets/js/15.bacbf527.js"><link rel="prefetch" href="/w2023/assets/js/16.e7714ee9.js"><link rel="prefetch" href="/w2023/assets/js/17.3aada0e0.js"><link rel="prefetch" href="/w2023/assets/js/18.96ead32f.js"><link rel="prefetch" href="/w2023/assets/js/19.4e5249bf.js"><link rel="prefetch" href="/w2023/assets/js/20.5dee1097.js"><link rel="prefetch" href="/w2023/assets/js/21.ec6718fa.js"><link rel="prefetch" href="/w2023/assets/js/22.fa6508dc.js"><link rel="prefetch" href="/w2023/assets/js/24.b2a84dff.js"><link rel="prefetch" href="/w2023/assets/js/25.85a09377.js"><link rel="prefetch" href="/w2023/assets/js/26.f1eb484c.js"><link rel="prefetch" href="/w2023/assets/js/27.25c44fa0.js"><link rel="prefetch" href="/w2023/assets/js/28.51999317.js"><link rel="prefetch" href="/w2023/assets/js/29.65075bca.js"><link rel="prefetch" href="/w2023/assets/js/3.1ae5a99d.js"><link rel="prefetch" href="/w2023/assets/js/30.5d45979f.js"><link rel="prefetch" href="/w2023/assets/js/31.22b62fdb.js"><link rel="prefetch" href="/w2023/assets/js/32.bd051bb4.js"><link rel="prefetch" href="/w2023/assets/js/33.56eaee4e.js"><link rel="prefetch" href="/w2023/assets/js/34.62593793.js"><link rel="prefetch" href="/w2023/assets/js/35.4456d2ac.js"><link rel="prefetch" href="/w2023/assets/js/36.2f2d8a40.js"><link rel="prefetch" href="/w2023/assets/js/37.5e082827.js"><link rel="prefetch" href="/w2023/assets/js/38.71855794.js"><link rel="prefetch" href="/w2023/assets/js/39.485f42ce.js"><link rel="prefetch" href="/w2023/assets/js/4.64bbff17.js"><link rel="prefetch" href="/w2023/assets/js/40.8e5ddf6e.js"><link rel="prefetch" href="/w2023/assets/js/41.fea3541d.js"><link rel="prefetch" href="/w2023/assets/js/42.d3040fe8.js"><link rel="prefetch" href="/w2023/assets/js/43.0e1d1cc9.js"><link rel="prefetch" href="/w2023/assets/js/44.fbbee689.js"><link rel="prefetch" href="/w2023/assets/js/45.90d16594.js"><link rel="prefetch" href="/w2023/assets/js/46.fa7c6a52.js"><link rel="prefetch" href="/w2023/assets/js/47.3fb6e90a.js"><link rel="prefetch" href="/w2023/assets/js/48.2c7860fe.js"><link rel="prefetch" href="/w2023/assets/js/5.8ce5e2d0.js"><link rel="prefetch" href="/w2023/assets/js/6.a0bc34a0.js"><link rel="prefetch" href="/w2023/assets/js/7.0dc96026.js"><link rel="prefetch" href="/w2023/assets/js/8.c36795df.js">
    <link rel="stylesheet" href="/w2023/assets/css/0.styles.33e990fb.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/w2023/" class="home-link router-link-active"><!----> <span class="site-name">MAD9022</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/w2023/overview/" class="nav-link">
  Overview
</a></div><div class="nav-item"><a href="/w2023/assignments/" class="nav-link">
  Deliverables
</a></div><div class="nav-item"><a href="/w2023/resources/" class="nav-link">
  Resources
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/w2023/overview/" class="nav-link">
  Overview
</a></div><div class="nav-item"><a href="/w2023/assignments/" class="nav-link">
  Deliverables
</a></div><div class="nav-item"><a href="/w2023/resources/" class="nav-link">
  Resources
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Introduction</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Hybrid</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/w2023/modules/hybrids/h1/" class="sidebar-link">Hybrid Phase One</a></li><li><a href="/w2023/modules/hybrids/h2/" class="sidebar-link">Hybrid Phase Two</a></li><li><a href="/w2023/modules/hybrids/h3/" class="sidebar-link">Hybrid Phase Three</a></li><li><a href="/w2023/modules/hybrids/h4/" aria-current="page" class="active sidebar-link">Hybrid Phase Four</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/w2023/modules/hybrids/h4/#enhancing-a-media-player" class="sidebar-link">Enhancing a Media Player</a></li><li class="sidebar-sub-header"><a href="/w2023/modules/hybrids/h4/#submission" class="sidebar-link">Submission</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Web Components &amp; PWAs</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/w2023/modules/reading/" class="sidebar-link">Reading Week</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Deliverables</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><header><div class="section-title purple">
    Media Player
  </div> <h1>MAD9022 Hybrids Phase 4</h1></header> <h2 id="enhancing-a-media-player"><a href="#enhancing-a-media-player" class="header-anchor">#</a> Enhancing a Media Player</h2> <p>The final phase of this project will deal with the seek bar and animations. The seek bar needs to update its appearance and the current time position as each track plays. We will also add the ability
to click on the seek bar and jump to that position in the track. We will also add the ability to shuffle the playlist.</p> <p>For this fourth phase you need to create a new branch called <code>seek</code> based on the updated <code>main</code> branch.</p> <p>Make sure that you have merged the <code>tracks</code> branch back into <code>main</code> before creating the <code>seek</code> branch.</p> <h3 id="seek-bar-appearance"><a href="#seek-bar-appearance" class="header-anchor">#</a> Seek Bar Appearance</h3> <p>In phase 2 we updated the display of the current time in the footer each time the <code>timeupdate</code> event fired. We will use the exact same event to update the seek bar.</p> <p>When the <code>timeupdate</code> event fires, we need to read the <code>currentTime</code> property value and the <code>duration</code> property value. Divide the <code>currentTime</code> by the <code>duration</code> to get a percentage complete for the
track.</p> <p>The seek bar is built from the following HTML.</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>progress<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>played<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>The <code>.progress</code> part always fills the width of the screen, which can be expressed as <code>100vw</code>. The <code>.played</code> part should be the same as the percentage that we calculated. Its width value would be
something like <code>32.45vw</code>.</p> <p>The only negative part about the display now is how jumpy it is when it changes. To fix this you can add a <code>transition</code> for the <code>width</code> property for the <code>.played</code> div in your CSS.</p> <div title="All About CSS Transitions" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/alxljWzQoY4" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; fullscreen" allowfullscreen="allowfullscreen"></iframe></div> <div title="TransitionEnd and AnimationEnd Events" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/Xsl1xA1HWic" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; fullscreen" allowfullscreen="allowfullscreen"></iframe></div> <h3 id="click-on-seek-bar-to-change-position"><a href="#click-on-seek-bar-to-change-position" class="header-anchor">#</a> Click on Seek Bar to Change Position</h3> <p>We have already built the function that runs when the current time gets updated. That function updates the current time display and updates the width of the progress bar.</p> <p>Now we need to add a <code>click</code> listener to the <code>.progress</code> section. A click event in JavaScript has a property called <code>x</code> which gives you the x position of the click on that element. If you divide
<code>ev.x</code> by the <code>clientWidth</code> value of the <code>.progress</code> section, you will have a percentage value. Multiply that number by 100 and add <code>vw</code> to the end of that value and you have the new value for the
<code>.played</code> div inside the <code>.progress</code> section.</p> <p>Once the width of the <code>.played</code> bar has a new width ready to be applied, then we need to update the the audio to match that position too. The <code>currentTime</code> property of <code>APP.audio</code> can be used to
change, not just read the part of the audio track that is playing.</p> <p>Use the same percentage value, before being multiplied by 100, and without the <code>vw</code> part. Multiply <code>APP.audio.duration</code> value by the percentage to get the new number for <code>APP.audio.currentTime</code>.</p> <h3 id="shuffling-playlists"><a href="#shuffling-playlists" class="header-anchor">#</a> Shuffling Playlists</h3> <p>One feature that needs to work in this second phase is the users' ability to click the shuffle button and have the playlist be rebuilt with a shuffled media array.</p> <p>Each time the user shuffles the playlist, any playing track should stop and the first track in the new playlist should automatically be selected, meaning that the <code>APP.currentTrack</code> value gets set
back to zero and the first item in the list gets visually set at the current track.</p> <p>The imported utility script can be used to hold functions or functionality that you want to add to your page. Here is an example of some code for the utility script.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//Adds the method to the Array prototype so no need to export</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">shuffle</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index<span class="token punctuation">,</span> arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> other <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">[</span>arr<span class="token punctuation">[</span>other<span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>arr<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>other<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Example usage</span>
<span class="token comment">// let myArr = ['Mulder', 'Scully', 'Skinner'];</span>
<span class="token comment">// myArr.shuffle();</span>
<span class="token comment">// now myArr is shuffled.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>With this code imported into the HTML page, all Arrays now have a method called <code>shuffle</code>. You can call this method to randomly shuffle the contents of an array.</p> <h3 id="animations"><a href="#animations" class="header-anchor">#</a> Animations</h3> <p>As part of your play function we can add a CSS class to the <code>&lt;body&gt;</code> element. By doing this we can style any part of the interface differently when the audio plays.</p> <p>If you normally have this as a CSS selector -<code>main p</code>, then that would be your default style. To do something different with those <code>&lt;p&gt;</code> elements when the audio is playing we just add a CSS style -
<code>body.playing main p</code>. This new style selector has a higher specificity and will override the default <code>main p</code> styles.</p> <p>In your media player you need to animate your title and animate the large image inside <code>.album_art__full</code> as well as the background of <code>.album_art__full</code>.</p> <div title="Understanding CSS Animations" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/mSUiUst60dY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; fullscreen" allowfullscreen="allowfullscreen"></iframe></div> <h3 id="demo-video"><a href="#demo-video" class="header-anchor">#</a> Demo Video</h3> <p>Here is a demo video highlighting the features of phase 4.</p> <div title="Phase 4 Demo" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/Y9e4nqyH4xY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; fullscreen" allowfullscreen="allowfullscreen"></iframe></div> <h2 id="submission"><a href="#submission" class="header-anchor">#</a> Submission</h2> <p>Invite your professor - <code>prof3ssorSt3v3</code> to be a collaborator on your private <code>media-player</code> repo, if you haven't already done this.</p> <p>Make sure that all your work was done on the <code>seek</code> branch.</p> <p><strong>Merge</strong> the <code>seek</code> branch into the <code>main</code> branch, but <strong>do NOT</strong> delete the <code>seek</code> branch after the merge. This will automatically update the Github Pages deployment which is still pointing to the
<code>main</code> branch.</p> <p>Submit the URL of your private repo and the github pages link to the proper exercise in BS LMS. Submit BOTH URLs in BS LMS.</p> <p>Due in Week 13.</p> <p>See BS LMS for the due date and time.</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">3/17/2023, 8:51:24 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/w2023/modules/hybrids/h3/" class="prev">
        Hybrid Phase Three
      </a></span> <span class="next"><a href="/w2023/modules/web-components/week1/1.1/">
        1.1: Web Components
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/w2023/assets/js/app.49733bfc.js" defer></script><script src="/w2023/assets/js/2.e00fc094.js" defer></script><script src="/w2023/assets/js/23.9a4c47c6.js" defer></script><script src="/w2023/assets/js/9.b21c66c5.js" defer></script><script src="/w2023/assets/js/11.92cefe25.js" defer></script>
  </body>
</html>
